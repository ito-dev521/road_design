<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÈÅìË∑ØË©≥Á¥∞Ë®≠Ë®àÁÆ°ÁêÜ„Ç∑„Çπ„ÉÜ„É†</title>
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
    <div class="app-container">
        <!-- „Éò„ÉÉ„ÉÄ„Éº -->
        <header class="header">
            <div class="header-left">
                <h1 class="app-title">üõ£Ô∏è ÈÅìË∑ØË©≥Á¥∞Ë®≠Ë®àÁÆ°ÁêÜ„Ç∑„Çπ„ÉÜ„É†</h1>
            </div>
            <div class="header-right">
                <div class="user-info">
                    <span id="userName">Loading...</span>
                    <span class="user-role" id="userRole"></span>
                </div>
                <a href="admin.html" class="btn btn-info" id="settingsLink">Ë®≠ÂÆö</a>
                <button class="btn btn-outline" id="logoutBtn">„É≠„Ç∞„Ç¢„Ç¶„Éà</button>
            </div>
        </header>

        <!-- „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„É≥„ÉÑ -->
        <main class="main-content">
            <!-- „Éó„É≠„Ç∏„Çß„ÇØ„ÉàÈÅ∏Êäû/‰ΩúÊàê„Ç®„É™„Ç¢ -->
            <section class="project-section">
                <div class="project-header">
                    <h2>„Éó„É≠„Ç∏„Çß„ÇØ„ÉàÁÆ°ÁêÜ</h2>
                    <button class="btn btn-primary" id="newProjectBtn">Êñ∞Ë¶è„Éó„É≠„Ç∏„Çß„ÇØ„Éà</button>
                </div>
                
                <div class="project-selector">
                    <select id="projectSelect" class="project-select">
                        <option value="">„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ</option>
                    </select>
                </div>
            </section>

            <!-- „Éó„É≠„Ç∏„Çß„ÇØ„ÉàÊÉÖÂ†± -->
            <section class="project-info" id="projectInfo" style="display: none;">
                <div class="project-details">
                    <h3 id="projectName"></h3>
                    <div class="project-meta">
                        <span id="projectClient"></span>
                        <span id="projectPeriod"></span>
                        <span class="project-status" id="projectStatus"></span>
                    </div>
                </div>
                
                <!-- ÈÄ≤Êçó„Çµ„Éû„É™„Éº -->
                <div class="progress-summary">
                    <div class="progress-card">
                        <div class="progress-number" id="totalTasks">0</div>
                        <div class="progress-label">Á∑è„Çø„Çπ„ÇØÊï∞</div>
                    </div>
                    <div class="progress-card">
                        <div class="progress-number" id="completedTasks">0</div>
                        <div class="progress-label">ÂÆå‰∫ÜÊ∏à„Åø</div>
                    </div>
                    <div class="progress-card">
                        <div class="progress-number" id="inProgressTasks">0</div>
                        <div class="progress-label">ÈÄ≤Ë°å‰∏≠</div>
                    </div>
                    <div class="progress-card">
                        <div class="progress-number danger" id="overdueTasks">0</div>
                        <div class="progress-label">ÈÅÖÂª∂</div>
                    </div>
                </div>
                
                <!-- „Éó„É≠„Ç∞„É¨„Çπ„Éê„Éº -->
                <div class="overall-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <span class="progress-text" id="progressText">0%</span>
                </div>
            </section>

            <!-- „Çø„Çπ„ÇØÁÆ°ÁêÜ„Ç®„É™„Ç¢ -->
            <section class="task-section" id="taskSection" style="display: none;">
                <div class="task-filters">
                    <button class="filter-btn active" data-phase="all">„Åô„Åπ„Å¶</button>
                    <button class="filter-btn" data-phase="„Éï„Çß„Éº„Ç∫1">„Éï„Çß„Éº„Ç∫1</button>
                    <button class="filter-btn" data-phase="„Éï„Çß„Éº„Ç∫2">„Éï„Çß„Éº„Ç∫2</button>
                    <button class="filter-btn" data-phase="„Éï„Çß„Éº„Ç∫3">„Éï„Çß„Éº„Ç∫3</button>
                </div>

                <!-- „Éï„Çß„Éº„Ç∫„Ç≥„É≥„ÉÜ„Éä„ÅØJavaScript„ÅßÂãïÁöÑÁîüÊàê -->
            </section>
        </main>
    </div>

    <!-- „É¢„Éº„ÉÄ„É´: Êñ∞Ë¶è„Éó„É≠„Ç∏„Çß„ÇØ„Éà‰ΩúÊàê -->
    <div class="modal-overlay" id="newProjectModal">
        <div class="modal">
            <div class="modal-header">
                <h3>Êñ∞Ë¶è„Éó„É≠„Ç∏„Çß„ÇØ„Éà‰ΩúÊàê</h3>
                <button class="modal-close" id="closeNewProjectModal">&times;</button>
            </div>
            <form id="newProjectForm">
                <div class="form-group">
                    <label for="projectNameInput">„Éó„É≠„Ç∏„Çß„ÇØ„ÉàÂêç *</label>
                    <input type="text" id="projectNameInput" required>
                </div>
                <div class="form-group">
                    <label for="projectCodeInput">„Éó„É≠„Ç∏„Çß„ÇØ„Éà„Ç≥„Éº„Éâ</label>
                    <input type="text" id="projectCodeInput" placeholder="‰æã: RD2024-001">
                </div>
                <div class="form-group">
                    <label for="clientNameInput">Áô∫Ê≥®ËÄÖÂêç</label>
                    <input type="text" id="clientNameInput">
                </div>
                <div class="form-group">
                    <label for="descriptionInput">Ê¶ÇË¶Å</label>
                    <textarea id="descriptionInput" rows="3"></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="startDateInput">ÈñãÂßã‰∫àÂÆöÊó•</label>
                        <input type="date" id="startDateInput">
                    </div>
                    <div class="form-group">
                        <label for="endDateInput">ÂÆå‰∫Ü‰∫àÂÆöÊó•</label>
                        <input type="date" id="endDateInput">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="cancelNewProject">„Ç≠„É£„É≥„Çª„É´</button>
                    <button type="submit" class="btn btn-primary">‰ΩúÊàê</button>
                </div>
            </form>
        </div>
    </div>

    <!-- „É¢„Éº„ÉÄ„É´: „Çø„Çπ„ÇØË©≥Á¥∞ -->
    <div class="modal-overlay" id="taskModal">
        <div class="modal task-modal">
            <div class="modal-header">
                <h3 id="taskModalTitle"></h3>
                <button class="modal-close" id="closeTaskModal">&times;</button>
            </div>
            <div class="task-modal-content">
                <div class="task-info">
                    <div class="task-status-selector">
                        <label>„Çπ„ÉÜ„Éº„Çø„Çπ:</label>
                        <select id="taskStatusSelect">
                            <option value="not_started">Êú™ÁùÄÊâã</option>
                            <option value="in_progress">ÈÄ≤Ë°å‰∏≠</option>
                            <option value="completed">ÂÆå‰∫Ü</option>
                            <option value="not_applicable">ÂØæË±°Â§ñ</option>
                        </select>
                    </div>
                    
                    <div class="task-assignment">
                        <label>ÊãÖÂΩìËÄÖ:</label>
                        <select id="taskAssigneeSelect">
                            <option value="">Êú™Ââ≤ÂΩì</option>
                        </select>
                    </div>
                    
                    <div class="task-date">
                        <label>‰∫àÂÆöÊó•:</label>
                        <input type="date" id="taskPlannedDate">
                    </div>
                    
                    <div class="task-meta">
                        <div class="task-meta-item">
                            <span class="meta-label">ÊäÄË°ìËÄÖ‰ΩúÊ•≠:</span>
                            <span id="taskTechnical"></span>
                        </div>
                        <div class="task-meta-item">
                            <span class="meta-label">„Éû„Éã„É•„Ç¢„É´:</span>
                            <span id="taskManual"></span>
                        </div>
                    </div>
                </div>
                
                <div class="task-notes">
                    <label>‰ΩúÊ•≠„É°„É¢:</label>
                    <textarea id="taskNotesInput" rows="4" placeholder="‰ΩúÊ•≠„Å´Èñ¢„Åô„Çã„É°„É¢„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ..."></textarea>
                </div>
                
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="cancelTaskEdit">„Ç≠„É£„É≥„Çª„É´</button>
                    <button type="button" class="btn btn-primary" id="saveTaskChanges">‰øùÂ≠ò</button>
                </div>
            </div>
        </div>
    </div>

    <!-- „É≠„Éº„Éá„Ç£„É≥„Ç∞ -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
        <div class="loading-text">Ë™≠„ÅøËæº„Åø‰∏≠...</div>
    </div>

    <script src="assets/js/main.js"></script>
    <script>
        console.log('HTML script tag executed');

        // JavaScript„Éï„Ç°„Ç§„É´„ÅÆË™≠„ÅøËæº„ÅøÁ¢∫Ë™ç
        function checkJavaScriptLoad() {
            console.log('Checking JavaScript status...');

            if (typeof RoadDesignApp === 'function') {
                console.log('‚úì RoadDesignApp class is available');
            } else {
                console.error('‚úó RoadDesignApp class not found');
            }

            if (window.roadDesignApp) {
                console.log('‚úì RoadDesignApp instance exists');
            } else {
                console.log('‚úó RoadDesignApp instance not found');
            }

            // „Ç∞„É≠„Éº„Éê„É´Èñ¢Êï∞„ÅÆÁ¢∫Ë™ç
            if (typeof debugRoadDesign === 'function') {
                console.log('‚úì debugRoadDesign function is available');
            } else {
                console.error('‚úó debugRoadDesign function not found');
            }

            if (typeof goToAdmin === 'function') {
                console.log('‚úì goToAdmin function is available');
            } else {
                console.error('‚úó goToAdmin function not found');
            }

            // „Éú„Çø„É≥„ÅÆÂ≠òÂú®Á¢∫Ë™ç„Å®„Ç§„Éô„É≥„Éà„É™„Çπ„Éä„ÉºË®≠ÂÆö
            const debugBtn = document.getElementById('settingsLink');
            const adminBtn = null;
            const directAdminBtn = null;

            console.log('Settings link element:', debugBtn);

            // „Éá„Éê„ÉÉ„Ç∞„Éú„Çø„É≥„Å´„Ç§„Éô„É≥„Éà„É™„Çπ„Éä„Éº„ÇíË®≠ÂÆö
            // aË¶ÅÁ¥†„ÅßÁõ¥Êé•ÈÅ∑Áßª„Åô„Çã„Åü„ÇÅËøΩÂä†„Ç§„Éô„É≥„Éà„ÅØ‰∏çË¶Å
        }

        // DOM„ÅåÂÆåÂÖ®„Å´Ë™≠„ÅøËæº„Åæ„Çå„ÅüÂæå„Å´„ÉÅ„Çß„ÉÉ„ÇØ„ÇíÂÆüË°å
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', checkJavaScriptLoad);
        } else {
            checkJavaScriptLoad();
        }

        // ËøΩÂä†„ÅÆ„ÉÅ„Çß„ÉÉ„ÇØÔºàÂøµ„ÅÆ„Åü„ÇÅÔºâ
        setTimeout(checkJavaScriptLoad, 1000);
        setTimeout(checkJavaScriptLoad, 3000);
    </script>
</body>
</html>